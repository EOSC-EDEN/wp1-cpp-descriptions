<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:cpp="https://eden-fidelis.eu/cpp/cpp/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
                    :root {
                        --main-width: 800px;
                        --main-margin: auto;
                        --main-font-family: Arial, sans-serif;
                        --main-font-size: 12pt;
                        --main-line-height: 1.5;
                        --main-background-color: #fff;
                        --main-color: #000;
                        --border-color: #222;
                        --header-background-color: #e0e0e0;
                        --table-font-size: 12pt;
                    }

                    body {
                        font-family: var(--main-font-family);
                        font-size: var(--main-font-size);
                        line-height: var(--main-line-height);
                        margin: var(--main-margin);
                        max-width: var(--main-width);
                        background-color: var(--main-background-color);
                        color: var(--main-color);
                    }

                    h1 {
                        font-size: 26pt;
                        font-weight: normal;
                    }

                    h2 {
                        font-size: 20pt;
                        font-weight: normal;
                        margin-top: 20px;
                    }

                    h3 {
                        font-size: 16pt;
                        font-weight: normal;
                        margin-top: 15px;
                    }

                    h4 {
                        font-size: 14pt;
                        font-weight: normal;
                        margin-top: 10px;
                    }

                    table {
                        border-collapse: collapse;
                        margin: 10px 0;
                        width: 100%;
                        border: 2px solid var(--border-color);
                        font-size: var(--table-font-size);
                    }

                    th,
                    td {
                        border: 2px solid var(--border-color);
                        padding: 8px;
                        text-align: left;
                        vertical-align: top;
                    }

                    th {
                        background-color: var(--header-background-color);
                        font-weight: bold;
                    }

                    th, td {
                        border: 2px solid #000;
                        padding: 8px;
                        text-align: left;
                        vertical-align: top;
                    }

                    table.intro td:first-child {
                        font-weight: bold;
                    }

                    table.intro td.history {
                        font-weight: normal;
                        background-color: var(--main-background-color);
                    }

                    .stepsColumn {
                        background-color: #fce5cd;
                    }

                    .stepsColumnHeader {
                        background-color: #f9cb9c;
                    }

                </style><title>EOSC-EDEN_CPP-010_File_Format_Validation</title></head><body><div class="introSection"><div class="title"><h1>File Format Validation (CPP-010)</h1></div><div class="introTable"><table class="intro"><tr><td>CPP-Identifier</td><td>CPP-010</td></tr><tr><td>CPP-Label</td><td>File Format Validation</td></tr><tr><td>Author</td><td>Bertrand Caron</td></tr><tr><td>Contributors</td><td>Kris Dekeyser</td></tr><tr><td>Evaluators</td><td>Matthew Addis, Maria Benauer, Laura Molloy</td></tr><tr><th>Change history</th><th>Comments</th></tr><tr><td class="history">Version 1.0.0 - 2025-08-29</td><td>Milestone version</td></tr><tr><td class="history">Version 1.1.0 - 2025-10-23</td><td>Migration to XML</td></tr></table></div></div><div class="descriptionSection"><h2>1. Description of the CPP</h2><p>The TDA validates Files against File format specifications.</p><div class="inoutTable"><h3>Inputs and outputs</h3><table class="inout"><tr><th colspan="2">Input(s)</th></tr><tr><td rowspan="1">Data</td><td>File</td></tr><tr><td rowspan="1">Metadata</td><td>Technical Metadata (File format identifier)</td></tr><tr><td rowspan="2">Documentation/guidance</td><td>File format specification</td></tr><tr><td>File format policy - Validation</td></tr><tr><th colspan="2">Output(s)</th></tr><tr><td rowspan="3">Metadata</td><td>Provenance metadata (Validity status)</td></tr><tr><td>Technical Metadata</td></tr><tr><td>Errors and Warnings</td></tr></table></div><div class="definitionAndScope"><h3>Definition and scope</h3><p>File Format validation is the process of checking a <em>File</em>’s structure against the
            specifications of the format it purports to be, or it was identified as in File Format
            Identification (CPP-008). In addition to <em>file</em> structure, validation generally
            encompasses internal integrity checks to verify that the File is not truncated and that
            each of its components are intact (e.g. by using internal <em>Metadata</em> like CRC
            checksums of the frames, or size of the data streams).</p><p>Erroneous format structures have many different causes. Some examples are listed below:</p><ul>
            <li>Improper behaviours of creation software (e.g. InDesign, in some previous versions,
                was known to export corrupted PDFs);</li>
            <li>Partial or failed transfers (e.g. digital photographs transferred through an
                unstable Bluetooth connection);</li>
            <li>Edition with a different software than the creation tool (e.g. PDFs produced with
                pdfTeX, then edited with Quark XPress).</li>
        </ul><p>The TDA validation policy should define the following aspects for each format:</p><ul>
            <li>Tool(s) used to validate the <em>File</em>. Since validation tools may produce false
                positives and false negatives, combining multiple tools - if possible - is suggested
                depending on the complexity of the format - PDF, in particular, is a very complex
                format for which validation tools may return very different results.</li>
            <li>Tool settings (e.g. strict or relaxed mode, verbosity, etc.);</li>
            <li>Severity rating of the issue;</li>
            <li>Guidelines for validation error handling.</li>
        </ul><p>The scope of format validation is limited to the conformance of the File against the
            structures as described in the format specification. It does not assess the quality of
            the information conveyed by the <em>File</em>. Thus, it is only one aspect of quality
            assurance, which can be automated or done manually. Although most of the File Format
            Validation process described in this CPP can be automated, human intervention is
            mandatory if the validity status of the File is “invalid”</p><p>Some tools (e.g. [JHOVE](https://jhove.openpreservation.org/) follow the XML validation
            logic and differentiate “well-formedness” (i.e. the <em>File</em> conforms to purely
            syntactic requirements) and “validity” (i.e. the <em>File</em> also complies with
            semantic requirements). In addition, tools may return additional information or
            warnings, e.g. if unrecognised or private chunks are found in the <em>File</em>. In such
            cases,the output of a validation process should include some additional free-text
            besides a short controlled term (e.g. “well-formed and valid”, “well-formed but not
            valid”, “not well-formed”)..</p><p>This CPP does not prescribe the action the TDA should undertake if File Format Validation
            returns errors, but rather includes fallback solutions, such as 1) ingesting the <em>
                File</em> as it is with warnings, 2) requesting a new delivery or searching for a
            suitable replacement, or 3) trying to repair the <em>File</em> (by triggering CPP-027
            File Repair). One of these solutions should generally be preferred over rejecting the <em>
                Object</em>.</p><p>Format validation is a recommended process to detect potential risks caused by incorrect
            format structures. However, its application must be carefully evaluated based on
            organisational capacities and the digital Objects of investigation (see on this subject
            Paul Wheatley’s blog post “A valediction for validation?”, 11 October 2018,
            available at
            [https://www.dpconline.org/blog/a-valediction-for-validation](https://www.dpconline.org/blog/a-valediction-for-validation)).
            Depending on organisational capacities, and the control the TDA has over digital Objects
            (indeed, the TDA may be able to require new, valid Files from a digitisation contractor
            or a depositor subject to legal deposit; on the other hand, it may be impossible for a
            private donor to meet the requirements for valid Files), it may decide to not perform
            File Format Validation
            due to:</p><ul>
            <li>The lack of suitable tool(s), in particular for proprietary formats;</li>
            <li>The lack of skilled staff to handle errors returned by the process.</li>
        </ul></div><div class="processDescription"><h3>Process description</h3><div class="triggerEvents"><h4>Trigger event(s)</h4><table class="triggerEvents"><tr><th>Trigger Event</th><th>CPP-identifier</th></tr><tr><td><span>Ingest</span></td><td>CPP-029 (Ingest)</td></tr><tr><td><span>Re-run of format validation because of the release of a new validation tool
                        or tool version</span><span>(Because validation tools may evolve, especially for complex formats,
                        re-assessing the validity of files already in storage is advised.)</span></td><td></td></tr><tr><td><span>Re-run of format identification and discrepancy between previous and current
                        result</span></td><td>CPP-008 (File Format Identification)</td></tr></table></div><div class="processSteps"><h4>Step-by-step description</h4><table class="stepTable"><tr><th>No</th><th>Supplier</th><th>Input</th><th class="stepsColumnHeader">Steps</th><th>Output</th><th>Customer</th></tr><tr><td rowspan="3">1</td><td rowspan="1">CPP-008 (File Format Identification)</td><td rowspan="1"><span>File format identifier </span></td><td class="stepsColumn" rowspan="3"><span>According to input, select the right tool(s) to perform format validation. If
                        the provided Metadata is not sufficient, perform CPP-009 (Metadata
                        extraction).</span></td><td rowspan="3"><span>
                            <a href="https://coptr.digipres.org/index.php/Validation">Validation
                                tool(s)</a>
                        </span><span>(Format validation is generally performed by a single tool. Nevertheless,
                            for some complex formats like PDF, TDAs may want to use more than one
                            tool to identify possible structure errors.)</span></td><td rowspan="3"></td></tr><tr><td rowspan="1">CPP-009 (Metadata Extraction)</td><td rowspan="1"><span>Technical metadata</span></td></tr><tr><td rowspan="1"></td><td rowspan="1"><span>File format policy - Validation</span></td></tr><tr></tr><tr><td rowspan="2">2</td><td rowspan="1"></td><td rowspan="1"><span>
                            <em>File</em>
                        </span></td><td class="stepsColumn" rowspan="2"><span>Apply the validation tools(s)</span></td><td rowspan="1"><span>Raw validation output</span></td><td rowspan="1"></td></tr><tr><td rowspan="1"></td><td rowspan="1"><span><a href="https://coptr.digipres.org/index.php/Validation">Validation
                                tool(s)</a>; as a default, reference parsing tools associated with the
                            format </span></td><td rowspan="1"><span>Errors and warnings</span></td><td rowspan="1"></td></tr><tr></tr><tr><td rowspan="2">3</td><td rowspan="1"></td><td rowspan="1"><span>Errors and warnings</span></td><td class="stepsColumn" rowspan="2"><span>Check validity status</span></td><td rowspan="1"><span>Confirm Validity status (step 4)</span></td><td rowspan="1"></td></tr><tr><td rowspan="1"></td><td rowspan="1"><span>Raw validation output</span></td><td rowspan="1"><span>Invalid file detected (step 3a)</span></td><td rowspan="1"></td></tr><tr></tr><tr><td rowspan="3">3a</td><td rowspan="1"></td><td rowspan="1"><span>Errors and warnings</span></td><td class="stepsColumn" rowspan="3"><span>Conduct technical analysis (e.g. rendition and other uses of the File,
                        comparison with the file format specification, etc.) </span></td><td rowspan="3"><span>Results of manual tests</span></td><td rowspan="3"></td></tr><tr><td rowspan="1"></td><td rowspan="1"><span>Validity status</span></td></tr><tr><td rowspan="1"></td><td rowspan="1"><span>File format specification</span></td></tr><tr></tr><tr><td rowspan="4">3b</td><td rowspan="4"></td><td rowspan="4"><span>Results of manual tests</span></td><td class="stepsColumn" rowspan="4"><span>Assess and choose one among the following outputs (in the given order) </span></td><td rowspan="1"><span>Retain the File as it is</span></td><td rowspan="1"></td></tr><tr><td rowspan="1"><span>Find another valid Representation (e.g. by establishing contact with the
                            producer)</span></td><td rowspan="1"></td></tr><tr><td rowspan="1"><span>Trigger File Repair to correct the file structure</span></td><td rowspan="1">CPP-027 (File Repair)</td></tr><tr><td rowspan="1"><span>Reject the <em>Object</em></span></td><td rowspan="1"></td></tr><tr></tr><tr><td rowspan="1">4</td><td class="stepsColumn" rowspan="1"><span>Document the process</span></td><td rowspan="1"><span>Provenance metadata</span></td><td rowspan="1"></td></tr><tr></tr></table></div></div><div class="rationaleAndWorstCases"><h3>Rationale(s) and worst case(s)</h3><table class="rationaleAndWorstCases"><tr><th>Rational</th><th>Impact of inaction or failure of the process</th></tr><tr><td><span>Format validation may identify structural errors that would cause issues when
                    attempting to render or transform the <em>File</em>. In particular, truncated <em>
                        File</em> can be identified by File Format Validation.</span></td><td><span>/</span></td></tr></table></div></div><div class="dependenciesSection"><h2>2. Dependencies and relationships with other CPPs</h2><div class="dependencies"><h3>Dependencies</h3><table class="dependencies"><tr><th>CPP-ID</th><th>CPP-Title</th><th>Relationship description</th></tr><tr><td>CPP-008</td><td>File Format Identification</td><td><span>File Format Validation requires a specialised tool. In general, the result of
                    File Format Identification is enough to determine which tool should be used. </span></td></tr></table></div><div class="otherRelations"><h3>Other relations</h3><table class="relations"><tr><th>Relation</th><th>CPP-ID</th><th>CPP-Title</th><th>Relationship description</th></tr><tr><td>May require</td><td>CPP-009</td><td>Metadata Extraction</td><td><span>Depending on the precision of the format registry used in the File Format
                    Identification process, the resulting information may be insufficient for
                    selecting the right validation tool. In such cases, additional Metadata from an
                    extraction tool may be required. For example, if an organisation uses Unix File
                    as its identification tool, which does not distinguish between different PDF
                    “flavours”, and wants to validate PDF/A against the PDF/A standard. In that
                    case, metadata extraction will be necessary to identify the conformance level
                    and select veraPDF as the suitable validation tool. </span></td></tr><tr><td>Required by</td><td>CPP-013</td><td>Object Management Reporting</td><td><span>File Format Validation reports essential information on the well-formedness and
                    validity of the Objects; validation errors; and data on the tools used in the
                    process.</span></td></tr><tr><td>Required by</td><td>CPP-014</td><td>File Migration</td><td><span>File Format Validation should be undertaken after File Migration was performed to
                    ensure that the target <em>File(s)</em> or <em>Representation(s)</em> are
                    valid..</span></td></tr><tr><td>Required by</td><td>CPP-015</td><td>Emulation and Rendering Tools</td><td><span>In order to have a decent level of confidence in the rendering process, the file format needs to be validated.</span></td></tr><tr><td>Required by</td><td>CPP-023</td><td>Risk Definition and Extraction</td><td><span>Risks can be related to specific file format erroneous structures</span></td></tr><tr><td>Required by</td><td>CPP-027</td><td>File Repair</td><td><span>File Repair is generally triggered by File Format Validation and is one of several ways to handle errors from this CPP.</span></td></tr><tr><td>May be required by</td><td>CPP-029</td><td>Ingest</td><td><span>A TDA may validate the format of the submitted Files in the ingest phase.</span></td></tr><tr><td>Not to be confused with</td><td>CPP-007</td><td>Virus Scanning</td><td><span>Both processes scan the Files to ensure that they are suitable for preservation. File Format Validation checks if a File conforms to its purported format specification (e.g. is this a valid PDF/A File?), while Virus Scanning checks for malware, regardless of format validity.</span></td></tr><tr><td>Not to be confused with</td><td>CPP-008</td><td>File Format Identification</td><td><span>File Format Identification is only about identifying the format while File Format Validation describes full scanning of the File to ensure it complies with the format standard.</span></td></tr></table></div></div><div class="linksSection"><h2>3. Links to frameworks</h2><div class="certification"><h3>Certification</h3><table class="certificationTable"><tr><th>Certification framework</th><th>Term used in framework to refer to the CPP</th><th>Section</th></tr><tr><td>CTS <a href="https://zenodo.org/records/7051012">
                                Link
                            </a></td><td></td><td><span>CTS does not explicitly mention format validation but it is in the scope of section Quality Assurance (R10) and understood as one of the “quality control checks in place to ensure the completeness and understandability of data”.</span></td></tr><tr><td>Nestor Seal <a href="https://d-nb.info/135630141X/34">
                                Link
                            </a></td><td></td><td><span>Format validation is not explicitly mentioned by Nestor Seal but is in scope of C21 “Submission Information Packages”; in particular, in the question “Which measures exist for validating the conformity of submission information packages?”.</span></td></tr><tr><td>ISO 16363 <a href="https://ccsds.org/wp-content/uploads/gravity_forms/5-448e85c647331d9cbaf66c096458bdd5/2025/01//652x0m2.pdf">
                                Link
                            </a></td><td><span>“checking that file formats are what they claim to be”</span></td><td><span>Section 4.1.5: “The repository shall have an ingest process which verifies each SIP for completeness and correctness”</span></td></tr></table></div><div class="frameworks"><h3>Other frameworks and reference documents</h3><table class="frameworks"><tr><th>Reference Document</th><th>Term used in framework to refer to the process</th><th>Section</th></tr><tr><td>OAIS <a href="https://ccsds.org/searchpubs/?gv_search=oais">
                                Link
                            </a></td><td><span>“validation of SIP data” </span></td><td><span>This operation is also in scope of what OAIS calls “validation of SIP data” in section 2.6.3 “Producer interaction”, where the standard suggests that the “validity” of SIPs are negotiated between the producer and the archive.</span></td></tr><tr><td>PREMIS <a href="https://www.loc.gov/standards/premis/v3/premis-3-0-final.pdf">
                                Link
                            </a></td><td><span>(Format) validation</span></td><td><span>Section: "Non-core metadata", subsection: "Quirks and anomalies" (p. 262).</span><span>Section: "Fixity, integrity, authenticity", p. 258.</span></td></tr></table></div></div><div class="referencesSection"><h2>4. Reference implementations</h2><div class="usecases"><h3>Use cases</h3><h4>Format validation of born-digital sound</h4><table class="useCaseTable"><tr><th colspan="2">Institutional background</th></tr><tr><td style="width:20%">Institution</td><td>Bibliothèque nationale de France, FR</td></tr><tr><th colspan="2">Description</th></tr><tr><td>Trigger event</td><td><span>BnF started collecting albums published by the phonographic industry in 2019, in the context of legal deposit of born-digital sound. <em>Objects</em> are collected in the form of highly standardised FLAC <em>Files</em>.</span></td></tr><tr><td>Problem statement</td><td><span>BnF decided to validate <em>Files</em> to identify transfer issues. However, the substantial volume of data and the considerable processing time have presented significant challenges to the performance and scalability of the validation operation. </span></td></tr><tr><td>Proposed solution</td><td><span>FLAC <em>Files</em> are verified with the <a href="https://xiph.org/flac/documentation_tools_flac.html">flac command-line tool</a>, which ensures both the overall <em>File</em>'s internal integrity and that of every individual frame within the audio stream. This is achieved through calculation of the CRC32 checksum for each frame. As this process is labour-intensive, the choice was made to do it by sampling. </span><span>As the producer is generally a major label with trained professionals in the domain of audio data, the chosen error handling method is to request a new, hopefully valid <em>File</em>.</span></td></tr></table></div><div class="documenation"><h3>Publicly available documentation</h3><table class="publicDocumentation"><tr><th style="width:20%">Institution</th><th style="width:20%">Organisation type</th><th style="width:10%">Language</th><th style="width:50%">Hyperlink</th></tr><tr><td rowspan="1">TIB – Leibniz Information Centre for Science and Technology and University Library, DE</td><td rowspan="1">National library<hr></hr>Non-commercial digital preservation service<hr></hr>Research infrastructure<hr></hr>Research performing organisation</td><td>English</td><td><a href="https://wiki.tib.eu/confluence/spaces/lza/pages/93608618/Ingest">https://wiki.tib.eu/confluence/spaces/lza/pages/93608618/Ingest</a></td></tr><tr><td rowspan="2">CSC – IT Center for Science Ltd., FI</td><td rowspan="2">Non-commercial digital preservation service</td><td>English</td><td><a href="https://urn.fi/urn:nbn:fi-fe2025040925236">https://urn.fi/urn:nbn:fi-fe2025040925236</a><div>(section 5.2)</div></td></tr><tr><td>Finnish</td><td><a href="https://urn.fi/urn:nbn:fi-fe2024051731943">https://urn.fi/urn:nbn:fi-fe2024051731943</a><div>(Annex 4, section 2.2.1)</div></td></tr><tr><td rowspan="1">Archivematica, CA</td><td rowspan="1">Digital preservation system</td><td>English</td><td><a href="https://www.archivematica.org/en/docs/archivematica-1.17/user-manual/preservation/preservation-planning/#characterization">https://www.archivematica.org/en/docs/archivematica-1.17/user-manual/preservation/preservation-planning/#characterization</a></td></tr></table></div></div></body></html>
